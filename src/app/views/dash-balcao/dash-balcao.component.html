
<c-row class="m-0 p-0 datepick" style="background-color: #000000;border-radius: 0px; padding-top:2px!important" >
    <c-col class="d-flex px-4" md="12" xl="12" xs="12" >
        <div class="date-picker-container" >
          <input type="text" id="datePicker" class = "datepick" #date>
          <i class="fa-regular fa-calendar"  style="margin-left: -25px;margin-right:25px; color: white;" ></i>
          <div class="calendar-header ps-1" style="font-size: 10px;margin-top: -28px; margin-bottom: 12px; color: white;" *ngIf="!date.value">Data Inicial</div>
        </div>
        <div class="date-picker-container ms-1">
          <input type="text" id="datePicker" class = "datepick" #date1>
          <i class="fa-regular fa-calendar"  style="margin-left: -25px;margin-right:25px; color: white;"></i>
          <div class="calendar-header ps-1" style="font-size: 10px;margin-top: -28px; margin-bottom: 12px; color: white;" *ngIf="!date1.value">Data Final</div>
        </div>
        <button id="pesquisarData" class="ms-2 datepick" style="border-color: white !important">
          <i class="fa-solid fa-magnifying-glass" style="color: rgb(255, 255, 255);  padding: 3px;"
          (click)="buscarDados(date.value,date1.value)"></i>
        </button>
    </c-col>
  </c-row>

<c-row class="m-0" >
    <c-col lg="12" class="pt-3 " style="background-color:#000000; min-height: 250px;"  id="graficoFaturamento">
        <div style="height: 300px;">
        <canvas baseChart id="faturamentoChartBalcao" #faturamentoChartBalcaoRef class="mb-3"></canvas>
        </div>
    </c-col>
</c-row>

<c-row class="g-4 px-4" style="margin-top:-40px !important">
    <c-col sm="6" xl="3">
        <c-widget-stat-a id="faturamentoWidget"
        color="info"
        [title]="'Faturamento'"
        >
        <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
            R${{widget.total.toFixed(2)}}
            <span class="fw-normal" style="font-size: 12px;">
            <!-- (-12.4% <svg cIcon name="cilArrowBottom" size="sm"></svg>) -->
            </span>
        </ng-template>
        <ng-template cTemplateId="widgetActionTemplate">
            <c-dropdown alignment="end" variant="btn-group">
            <button [caret]="false" cButton cDropdownToggle class="p-0 text-white" color="transparent" aria-label="Open dropdown">
                <svg cIcon name="cilOptions"></svg>
            </button>
            <ul cDropdownMenu>
                <li><a [routerLink]="[]" cDropdownItem>...</a></li>
                <li>
                <hr cDropdownDivider>
                </li>
                <li>
                <button cDropdownItem>...</button>
                </li>
            </ul>
            </c-dropdown>
        </ng-template>
        
        <ng-template cTemplateId="widgetChartTemplate" class="bg-dark w-100 h-100">
            <!-- <c-chart [data]="data1[0]" [options]="options[0]" class="mt-3 mx-3" height="70" width="340" [type]="'line'"></c-chart> -->
            <div class="h-100">
                <canvas id="chartFaturamentoWidgetBalcao" #chartFaturamentoWidgetBalcaoRef [height]="80"  style="z-index: 1;"></canvas>

            </div>
            
        </ng-template>
        </c-widget-stat-a>
    </c-col>
<c-col sm="6" xl="3">
    <c-widget-stat-a id="ticketWidget"
    [title]="'Ticket Medio'"
    color="info"
    >
    <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>R${{(widget.total/widget.numeroVendas).toFixed(2)}}</span>
        <span class="fw-normal" style="font-size: 12px;">
        <!-- (40.9%<svg cIcon name="cilArrowTop" size="sm"></svg>) -->
        </span>
    </ng-template>
    <ng-template cTemplateId="widgetActionTemplate">
        <c-dropdown alignment="end" variant="btn-group">
        <button [caret]="false" cButton cDropdownToggle class="p-0 text-white" color="transparent" aria-label="Open dropdown">
            <svg cIcon name="cilOptions"></svg>
        </button>
        <ul cDropdownMenu>
            <li><a [routerLink]="[]" cDropdownItem>...</a></li>
        </ul>
        </c-dropdown>
    </ng-template>
    <ng-template cTemplateId="widgetChartTemplate">
        <!-- <c-chart [data]="data[1]" [options]="options[1]" class="mt-3 mx-3" height="70" type="line"></c-chart> -->
        <div >
            <canvas id="chartTicketMedioWidgetBalcao" #chartTicketMedioWidgetBalcaoRef [height]="80"   style="z-index: 1;"></canvas>

        </div>
    </ng-template>
    </c-widget-stat-a>
</c-col>
<c-col sm="6" xl="3">
    <c-widget-stat-a  id="cancelamentosWidget"
    [title]="'Cancelamentos'"
    color="warning"
    >
    <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>{{widget.comandasAbertas.toFixed(0)}}</span>
        <span class="fw-normal" style="font-size: 12px;">
        <!-- (84.7% <svg cIcon name="cilArrowTop" size="sm"></svg>) -->
        </span>
    </ng-template>
    <ng-template cTemplateId="widgetActionTemplate">
        <c-dropdown alignment="end" variant="btn-group">
        <button [caret]="false" cButton cDropdownToggle class="p-0 text-white" color="transparent" aria-label="Open dropdown">
            <svg cIcon name="cilOptions"></svg>
        </button>
        <ul cDropdownMenu>
            <li><a [routerLink]="[]" cDropdownItem>...</a></li>
        </ul>
        </c-dropdown>
    </ng-template>
    <ng-template cTemplateId="widgetChartTemplate">
        <div>
            <canvas id="chartCancelamentosWidgetBalcao" #chartCancelamentosWidgetBalcaoRef [height]="80"  style="z-index: 1;"></canvas>
        </div>
    </ng-template>
    </c-widget-stat-a>
</c-col>
<c-col sm="6" xl="3">
    <c-widget-stat-a id="vendasWidget"
    [title]="'Qtd. Vendas'"
    color="danger"
    >
    <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>{{widget.numeroVendas}}</span>
        <span class="fw-normal" style="font-size: 12px;">
        <!-- (-23.6% <svg cIcon name="cilArrowBottom" size="sm"></svg>) -->
        </span>
    </ng-template>
    <ng-template cTemplateId="widgetActionTemplate">
        <c-dropdown alignment="end" variant="btn-group">
        <button [caret]="false" cButton cDropdownToggle class="p-0 text-white" color="transparent" aria-label="Open dropdown">
            <svg cIcon name="cilOptions"></svg>
        </button>
        <ul cDropdownMenu>
            <li><a [routerLink]="[]" cDropdownItem>...</a></li>
        </ul>
        </c-dropdown>
    </ng-template>
    <ng-template cTemplateId="widgetChartTemplate">
        <!-- <c-chart [data]="data[3]" [options]="options[3]" class="mt-3 mx-3" height="70" type="bar"></c-chart> -->
        <div>
            <canvas id="chartVendasWidgetBalcao" #chartVendasWidgetBalcaoRef [height]="80"  style="z-index: 1;"></canvas>

        </div>
    </ng-template>
    </c-widget-stat-a>
</c-col>
</c-row>

<c-row class="mt-4 px-4">
    <c-col xs>
        <c-card class="mb-4">
        <c-card-header >Top 10 Produtos</c-card-header>
        <c-card-body>
            <c-row>
            <c-col md="6" xl="4" xs="12">
                <c-row>
                <c-col xs="6">
                    <div class="border-start border-start-4 border-start-info py-1 px-3 mb-3">
                    <div class="text-body-secondary text-truncate small">Vendas</div>
                    <div class="fs-5 fw-semibold">R${{produtosListaVendas}}</div>
                    </div>
                </c-col>
                <c-col xs="6">
                    <div class="border-start border-start-4 border-start-danger py-1 px-3 mb-3">
                    <div class="text-body-secondary text-truncate small">Custo</div>
                    <div class="fs-5 fw-semibold">R${{produtosListaCusto}}</div>
                    </div>
                </c-col>
                </c-row>
                <hr class="mt-0" />
                <div class="progress-group mb-4 border rounded p-3 pe-5"  (click)="produtoGraficoGrupo('top 10 produtos')">
                <div class="progress-group-prepend me-3">
                    <span class="text-body-secondary small d-flex me-3 p-0 mt-2">
                    <i class="fa-solid fa-ranking-star pt-1 me-3"></i>
                    <div class="d-block p-0">
                        <p class="text-nowrap">TOP 10 PRODUTOS</p>
                    </div>
                    </span>
                </div>
                </div>
                <c-tabs [activeItemKey]="0" class="p-0 m-0">
                <c-tabs-list variant="underline-border" class="p-2"
                [ngStyle]="{
                'display': 'flex',
                'align-items': 'center',
                'justify-content': 'space-between'}">
                <div class="d-flex">
                    <button cTab [itemKey]="0"><i class="fa-solid fa-arrow-left"></i></button>
                    <button cTab [itemKey]="1"><i class="fa-solid fa-arrow-right"></i></button>
                </div>
                    <c-dropdown >
                    <i cDropdownToggle  class="fa-regular fa-circle-question"></i>
                    <ul cDropdownMenu class="p-3">
                        <p style="font-size: 10px;"><strong>Custo</strong> = Quantidade de Vendas X Pre√ßo de Custo </p>
                    </ul>
                    </c-dropdown>
                </c-tabs-list>
                <c-tabs-content>
                    <c-tab-panel class="p-1 pt-3" [itemKey]="0" >
                    <!-- tab 1 de produtos -->
                    <div *ngFor="let produtos of jsonServer.listaDeProdutos" 
                    class="progress-group p-0"  
                    (click)="produtoGraficoGrupo(produtos.produto)"
                    id="divProdutos">
                        <c-card class=" w-100" id="cardDelivery">
                        <c-card-header id="tituloProd" >
                            <div class="progress-group-prepend m-0 p-0 d-flex justify-content-start ps-3" >
                            <span class="text-body-secondary small d-flex"  >
                                <!-- <i class="fa-solid fa-circle " style="color: green;"></i> -->
                                <div class="d-block" >
                                <p class="text-nowrap " style="font-size: 20px; text-align: center;text-transform: uppercase;"><strong>{{produtos.produto}}</strong></p><br/>
                                <p class="text-nowrap " style="margin-top:-35px ;margin-bottom:-5px ">Id: {{produtos.id}}</p>
                                </div>
                            </span>
                            </div>
                        </c-card-header>
                        <c-card-body>
                            <div class="progress-group-bars d-flex ps-3">
                            <span class="text-body-secondary small w-50 pe-1 ps-1">
                                <p style="font-size: 10px; margin-bottom: 0px;">Custo</p>
                                <p class="mb-0"><strong>R${{produtos.custo}}</strong></p>
                                <c-progress thin color="danger" value="{{produtos.custo == 0  ? 0 : (produtos.custo/(produtos.custo+produtos.venda))*100 }}" aria-label="Custo" />
                            </span>
                            <span class="text-body-secondary small w-50 pe-1 ps-1" >
                                <p style="font-size: 10px;margin-bottom: 0px;">Venda</p>
                                <p  class="mb-0"><strong>R${{produtos.venda}}</strong></p>
                                <c-progress thin color="info" value="{{produtos.custo == 0 ? 100 : (produtos.venda/(produtos.custo+produtos.venda))*100}}" aria-label="Venda" />
                            </span>
                            </div>
                        </c-card-body>
                        </c-card>  
                    </div>
                    </c-tab-panel>
                    <c-tab-panel class="p-3" [itemKey]="1">
                    <div *ngFor="let produtos of jsonServer.listaDeProdutos1" 
                    class="progress-group p-0"  
                    (click)="produtoGraficoGrupo(produtos.produto)"
                    id="divProdutos">
                        <c-card class=" w-100" id="cardDelivery">
                        <c-card-header id="tituloProd" >
                            <div class="progress-group-prepend m-0 p-0 d-flex justify-content-start ps-3" >
                            <span class="text-body-secondary small d-flex"  >
                                <!-- <i class="fa-solid fa-circle " style="color: green;"></i> -->
                                <div class="d-block" >
                                <p class="text-nowrap " style="font-size: 20px; text-align: center;text-transform: uppercase;"><strong>{{produtos.produto}}</strong></p><br/>
                                <p class="text-nowrap " style="margin-top:-35px ;margin-bottom:-5px ">Id: {{produtos.id}}</p>
                                </div>
                            </span>
                            </div>
                        </c-card-header>
                        <c-card-body>
                            <div class="progress-group-bars d-flex ps-3">
                            <span class="text-body-secondary small w-50 pe-1 ps-1">
                                <p style="font-size: 10px; margin-bottom: 0px;">Custo</p>
                                <p class="mb-0"><strong>R${{produtos.custo}}</strong></p>
                                <c-progress thin color="danger" value="{{produtos.custo == 0  ? 0 : 100 - (produtos.custo/(produtos.custo+produtos.venda))*100 }}" aria-label="Custo" />
                            </span>
                            <span class="text-body-secondary small w-50 pe-1 ps-1" >
                                <p style="font-size: 10px;margin-bottom: 0px;">Venda</p>
                                <p  class="mb-0"><strong>R${{produtos.venda}}</strong></p>
                                <c-progress thin color="info" value="{{produtos.custo == 0 ? 100: 100 - (produtos.venda/(produtos.custo+produtos.venda))*100}}" aria-label="Venda" />
                            </span>
                            </div>
                        </c-card-body>
                        </c-card>  
                    </div>
                    </c-tab-panel>
                </c-tabs-content>
                </c-tabs>
                <div class="legend text-center d-none d-md-block" ngPreserveWhitespaces>
                <small>
                    <sup>
                    <span class="badge badge-pill badge-sm bg-info">&nbsp;</span>
                    </sup>
                    <span>Venda</span>
                    &nbsp;&nbsp;
                    <sup>
                    <span class="badge badge-pill badge-sm bg-danger">&nbsp;</span>
                    </sup>
                    <span>Custo</span>
                </small>
                </div>
            </c-col>
            <c-col md="6" xl="8" xs="12">
                <c-row id="graficoGrupoScroll" class="mt-1">
                <canvas id="vendasPorProdutoChartBalcao" [height]="500" #vendasPorProdutoChartBalcaoRef></canvas>
                </c-row>
                <c-row class="mt-3 pt-5">
                <canvas id="estoqueProdutoChartBalcao" [height]="500" #estoqueProdutoChartBalcaoRef></canvas>
                </c-row>
            </c-col>
            </c-row>
        </c-card-body>
        </c-card>
    </c-col>
</c-row>
  

  