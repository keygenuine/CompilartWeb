<!-- <ng-container>
  <c-container [fluid]="true" class="border-bottom px-4">
  
  <c-header-nav class="d-none d-md-flex">
    <c-nav-item >
      <a cNavLink class="text-center" style="color: #6A6E76;">Periodo: 01/01/2024 - 31/01/2024</a>
    </c-nav-item>
  </c-header-nav>
</c-container>
</ng-container> -->
<c-row class="m-0 p-0 datepick" style="background-color: #000000;border-radius: 0px; padding-top:2px!important" >
  <c-col class="d-flex px-4" md="12" xl="12" xs="12" >
      <div class="date-picker-container" >
        <input type="text" id="datePicker" class = "datepick" #date>
        <i class="fa-regular fa-calendar"  style="margin-left: -25px;margin-right:25px; color: white;" ></i>
        <div class="calendar-header ps-1" style="font-size: 10px;margin-top: -28px; margin-bottom: 12px; color: white;" *ngIf="!date.value">Data Inicial</div>
      </div>
      <div class="date-picker-container ms-1">
        <input type="text" id="datePicker" class = "datepick" #date1>
        <i class="fa-regular fa-calendar"  style="margin-left: -25px;margin-right:25px; color: white;"></i>
        <div class="calendar-header ps-1" style="font-size: 10px;margin-top: -28px; margin-bottom: 12px; color: white;" *ngIf="!date1.value">Data Final</div>
      </div>
      <button id="pesquisarData" class="ms-2 datepick" style="border-color: white !important">
        <i class="fa-solid fa-magnifying-glass" style="color: rgb(255, 255, 255);  padding: 3px;"
        (click)="buscarDados(date.value,date1.value)"></i>
      </button>
  </c-col>
</c-row>

<c-row class="m-0 p-0" >
    <c-col lg="12" class="pt-3 p-0 " id="graficoFaturamento"  style="background-color:#000000; min-height: 250px;  box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;">

    <div style="height: 300px;" class="m-0 p-0">
      <canvas baseChart id="faturamentoChart" #faturamentoChartRef class="mb-3"></canvas>
    </div>
  </c-col>
</c-row>


<!-- <date-range-picker-forms-example></date-range-picker-forms-example> -->

<c-row class="g-4 px-4" style="margin-top:-40px !important">
  <c-col sm="6" xl="3">
    <c-widget-stat-a id="faturamentoWidget"
    color="info"
      [title]="'Faturamento'"
    >
      <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        R${{widget.total.toFixed(2)}}
        <span class="fw-normal" style="font-size: 12px;">
          <!-- (-12.4% <svg cIcon name="cilArrowBottom" size="sm"></svg>) -->
        </span>
      </ng-template>
      <ng-template cTemplateId="widgetActionTemplate">
        <c-dropdown alignment="end" variant="btn-group">
          <button [caret]="false" cButton cDropdownToggle class="p-0 text-white" color="transparent" aria-label="Open dropdown">
            <svg cIcon name="cilOptions"></svg>
          </button>
          <ul cDropdownMenu>
            <li><a [routerLink]="[]" cDropdownItem>...</a></li>
            <li>
              <hr cDropdownDivider>
            </li>
            <li>
              <button cDropdownItem>...</button>
            </li>
          </ul>
        </c-dropdown>
      </ng-template>
   
      <ng-template cTemplateId="widgetChartTemplate" class="bg-dark w-100 h-100">
        <!-- <c-chart [data]="data1[0]" [options]="options[0]" class="mt-3 mx-3" height="70" width="340" [type]="'line'"></c-chart> -->
         <div class="h-100">
           <canvas id="chartFaturamentoWidget" #chartFaturamentoWidgetRef [height]="80"  style="z-index: 1;"></canvas>

         </div>
        
      </ng-template>
    </c-widget-stat-a>
  </c-col>
  <c-col sm="6" xl="3">
    <c-widget-stat-a id="ticketWidget"
      [title]="'Ticket Medio'"
      color="info"
    >
      <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>R${{(widget.total/widget.numeroVendas).toFixed(2)}}</span>
        <span class="fw-normal" style="font-size: 12px;">
          <!-- (40.9%<svg cIcon name="cilArrowTop" size="sm"></svg>) -->
        </span>
      </ng-template>
      <ng-template cTemplateId="widgetActionTemplate">
        <c-dropdown alignment="end" variant="btn-group">
          <button [caret]="false" cButton cDropdownToggle class="p-0 text-white" color="transparent" aria-label="Open dropdown">
            <svg cIcon name="cilOptions"></svg>
          </button>
          <ul cDropdownMenu>
            <li><a [routerLink]="[]" cDropdownItem>...</a></li>
          </ul>
        </c-dropdown>
      </ng-template>
      <ng-template cTemplateId="widgetChartTemplate">
        <!-- <c-chart [data]="data[1]" [options]="options[1]" class="mt-3 mx-3" height="70" type="line"></c-chart> -->
         <div >
           <canvas id="chartTicketMedioWidget" #chartTicketMedioWidgetRef [height]="80"   style="z-index: 1;"></canvas>

         </div>
      </ng-template>
    </c-widget-stat-a>
  </c-col>
  <c-col sm="6" xl="3">
    <c-widget-stat-a  id="cancelamentosWidget"
      [title]="'Cancelamentos'"
      color="warning"
    >
      <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>{{widget.cancelamentos.toFixed(0)}}</span>
        <span class="fw-normal" style="font-size: 12px;">
          <!-- (84.7% <svg cIcon name="cilArrowTop" size="sm"></svg>) -->
        </span>
      </ng-template>
      <ng-template cTemplateId="widgetActionTemplate">
        <c-dropdown alignment="end" variant="btn-group">
          <button [caret]="false" cButton cDropdownToggle class="p-0 text-white" color="transparent" aria-label="Open dropdown">
            <svg cIcon name="cilOptions"></svg>
          </button>
          <ul cDropdownMenu>
            <li><a [routerLink]="[]" cDropdownItem>...</a></li>
          </ul>
        </c-dropdown>
      </ng-template>
      <ng-template cTemplateId="widgetChartTemplate">
        <!-- <c-chart [data]="data[2]" [options]="options[2]" class="mt-3" height="70" type="line"></c-chart> -->
         <div>
           <canvas id="chartCancelamentosWidget" #chartCancelamentosWidgetRef [height]="80"  style="z-index: 1;"></canvas>

         </div>
      </ng-template>
    </c-widget-stat-a>
  </c-col>
  <c-col sm="6" xl="3">
    <c-widget-stat-a id="vendasWidget"
      [title]="'Qtd. Vendas'"
      color="danger"
    >
      <ng-template cTemplateId="widgetValueTemplate" ngPreserveWhitespaces>
        <span>{{widget.numeroVendas}}</span>
        <span class="fw-normal" style="font-size: 12px;">
          <!-- (-23.6% <svg cIcon name="cilArrowBottom" size="sm"></svg>) -->
        </span>
      </ng-template>
      <ng-template cTemplateId="widgetActionTemplate">
        <c-dropdown alignment="end" variant="btn-group">
          <button [caret]="false" cButton cDropdownToggle class="p-0 text-white" color="transparent" aria-label="Open dropdown">
            <svg cIcon name="cilOptions"></svg>
          </button>
          <ul cDropdownMenu>
            <li><a [routerLink]="[]" cDropdownItem>...</a></li>
          </ul>
        </c-dropdown>
      </ng-template>
      <ng-template cTemplateId="widgetChartTemplate">
        <!-- <c-chart [data]="data[3]" [options]="options[3]" class="mt-3 mx-3" height="70" type="bar"></c-chart> -->
         <div>
           <canvas id="chartVendasWidget" #chartVendasWidgetRef [height]="80"  style="z-index: 1;"></canvas>

         </div>
      </ng-template>
    </c-widget-stat-a>
  </c-col>
</c-row>

<!-- <app-widgets-dropdown class="mt-4" [elements]="bankname"/> -->


<c-row class="mt-4 px-4">
      <c-col md="12" xl="12" xs="12" class="text-center" >
        <c-card-group class="mb-4" >
          <c-card id="cardDelivery"
          [ngClass]="{
            'cardClasseShow': cardClass[0], 
            'cardClasse':!cardClass[0]}"
          (click)="deliverys[0].total>0?  cardClass[0]=!cardClass[0] :''" >
          <div> 
            <img cCardImg="top" src="./assets/img/ifood.png" style="width: 200px;height: 200px;">
          </div>
            <c-card-body>
              <p cCardText>
                Total de Vendas: <strong>R${{(deliverys[0].total).toFixed(2)}}</strong> <br/>
                Ticket Medio: <strong>R${{ deliverys[0].NumeroPedidos == 0 ? 0 : (deliverys[0].total/deliverys[0].NumeroPedidos).toFixed(2)  }}</strong><br/>
                Numero de Pedidos: <strong>{{(deliverys[0].NumeroPedidos).toFixed(0)}}</strong><br/>
              </p>
              <div [ngStyle]="{
                'height':'300px',
              }">
                <canvas baseChart id="chartIfood" [height]="450" #chartIfoodRef class="mb-3"> </canvas> 
              </div>
            </c-card-body>
          </c-card>
          <c-card  id="cardDelivery"
          [ngClass]="{
            'cardClasseShow': cardClass[1], 
            'cardClasse':!cardClass[1]}"
                  (click)="deliverys[1].total>0?  cardClass[1]=!cardClass[1] :''">
          <div> 
            <img cCardImg="top" src="./assets/img/aiqfome.png" style="width: 200px;height: 200px;">
          </div>
            <c-card-body>
              <!-- <h5 cCardTitle>Vendas {{origem.origem}}</h5> -->
              <p cCardText>
                Total de Vendas: <strong>R${{(deliverys[1].total).toFixed(2)}}</strong> <br/>
                Ticket Medio: <strong>R${{ deliverys[1].NumeroPedidos == 0 ? 0 : (deliverys[1].total/deliverys[1].NumeroPedidos).toFixed(2) }}</strong><br/>
                Numero de Pedidos: <strong>{{(deliverys[1].NumeroPedidos).toFixed(0)}}</strong><br/>
              </p>
              <div [ngStyle]="{
                'height':'300px',
              }">
                <canvas baseChart id="chartAiqfome" [height]="450" #chartAiqfomeRef class="mb-3"> </canvas> 
              </div>
            </c-card-body>
          </c-card>
          <c-card  id="cardDelivery"
          [ngClass]="{
            'cardClasseShow': cardClass[2], 
            'cardClasse':!cardClass[2]}"
          (click)="deliverys[2].total>0?  cardClass[2]=!cardClass[2] :''">
          <div> 
            <img cCardImg="top" src="./assets/img/upzap.png" style="width: 200px;height: 200px;">
          </div>
            <c-card-body>
              <!-- <h5 cCardTitle>Vendas {{origem.origem}}</h5> -->
              <p cCardText>
                Total de Vendas: <strong>R${{(deliverys[2].total).toFixed(2)}}</strong> <br/>
                Ticket Medio: <strong>R${{deliverys[2].NumeroPedidos == 0 ? 0 : (deliverys[2].total/deliverys[2].NumeroPedidos).toFixed(2)}}</strong><br/>
                Numero de Pedidos: <strong>{{(deliverys[2].NumeroPedidos).toFixed(0)}}</strong><br/>
              </p>
              <div [ngStyle]="{
                'height':'300px',
              }">
                <canvas baseChart id="chartUpzap" [height]="450" #chartUpzapRef class="mb-3"> </canvas> 
              </div>
            </c-card-body>
          </c-card>
          <c-card  id="cardDelivery"
          [ngClass]="{
            'cardClasseShow': cardClass[3], 
            'cardClasse':!cardClass[3]}"
        (click)="deliverys[3].total>0?  cardClass[3]=!cardClass[3] :''">
          <div> 
            <img cCardImg="top" src="./assets/img/estabelecimento.png" style="width: 200px;height: 200px;">
          </div>
            <c-card-body>
              <!-- <h5 cCardTitle>Vendas {{origem.origem}}</h5> -->
              <p cCardText>
                Total de Vendas: <strong>R${{(deliverys[3].total).toFixed(2)}}</strong> <br/>
                Ticket Medio: <strong>R${{(deliverys[3].ticketMedio).toFixed(2)}}</strong><br/>
                Numero de Pedidos: <strong>{{(deliverys[3].NumeroPedidos).toFixed(0)}}</strong><br/>
              </p>
              <div [ngStyle]="{
                'height':'300px',
              }">
                <canvas baseChart id="chartEstabelecimento" [height]="450" #chartEstabelecimentoRef class="mb-3"> </canvas> 
              </div>
            </c-card-body>
          </c-card>
          <c-card id="cardDelivery"
          [ngClass]="{
            'cardClasseShow': cardClass[4], 
            'cardClasse':!cardClass[4]}"
          (click)="deliverys[4].total>0?  cardClass[4]=!cardClass[4] :''">
          <div> 
            <img cCardImg="top" src="./assets/img/uairango.png" style="width: 200px;height: 200px;">
          </div>
            <c-card-body>
              <!-- <h5 cCardTitle>Vendas {{origem.origem}}</h5> -->
              <p cCardText>
                Total de Vendas: <strong>R${{(deliverys[4].total).toFixed(2)}}</strong> <br/>
                Ticket Medio: <strong>R${{(deliverys[4].ticketMedio).toFixed(2)}}</strong><br/>
                Numero de Pedidos: <strong>{{(deliverys[4].NumeroPedidos).toFixed(0)}}</strong><br/>
              </p>
              <div [ngStyle]="{
                'height':'300px',
              }">
                <canvas baseChart id="chartUaiRango" [height]="450" #chartUaiRangoRef class="mb-3"> </canvas> 
              </div>
            </c-card-body>
          </c-card>
        </c-card-group>
      </c-col>
</c-row>

<c-row class="mt-4 px-4">
  <c-col xs>
    <c-card class="mb-4">
      <c-card-header >Top 10 Produtos</c-card-header>
      <c-card-body>
        <c-row>
          <c-col md="6" xl="4" xs="12">
            <c-row>
              <c-col xs="6">
                <div class="border-start border-start-4 border-start-info py-1 px-3 mb-3">
                  <div class="text-body-secondary text-truncate small">Vendas</div>
                  <div class="fs-5 fw-semibold">{{produtosListaVendas}}</div>
                </div>
              </c-col>
              <c-col xs="6">
                <div class="border-start border-start-4 border-start-danger py-1 px-3 mb-3">
                  <div class="text-body-secondary text-truncate small">Custo</div>
                  <div class="fs-5 fw-semibold">{{produtosListaCusto}}</div>
                </div>
              </c-col>
            </c-row>
            <hr class="mt-0" />
            <div class="progress-group mb-4 border rounded p-3 pe-5"  (click)="produtoGraficoGrupo('top 10 produtos')">
              <div class="progress-group-prepend me-3">
                <span class="text-body-secondary small d-flex me-3 p-0 mt-2">
                  <i class="fa-solid fa-ranking-star pt-1 me-3"></i>
                  <div class="d-block p-0">
                    <p class="text-nowrap">TOP 10 PRODUTOS</p>
                  </div>
                </span>
              </div>
            </div>
            <c-tabs [activeItemKey]="0" class="p-0 m-0">
              <c-tabs-list variant="underline-border" class="p-2"
              [ngStyle]="{
              'display': 'flex',
              'align-items': 'center',
              'justify-content': 'space-between'}">
              <div class="d-flex">
                <button cTab [itemKey]="0"><i class="fa-solid fa-arrow-left"></i></button>
                <button cTab [itemKey]="1"><i class="fa-solid fa-arrow-right"></i></button>
              </div>
                <c-dropdown >
                  <i cDropdownToggle  class="fa-regular fa-circle-question"></i>
                  <ul cDropdownMenu class="p-3">
                    <p style="font-size: 10px;"><strong>Custo</strong> = Quantidade de Vendas X Preço de Custo </p>
                  </ul>
                </c-dropdown>
              </c-tabs-list>
              <c-tabs-content>
                <c-tab-panel class="p-1 pt-3" [itemKey]="0" >
                  <!-- tab 1 de produtos -->
                  <div *ngFor="let produtos of jsonServer.listaDeProdutos" 
                  class="progress-group p-0"  
                  (click)="produtoGraficoGrupo(produtos.produto)"
                  id="divProdutos">
                    <c-card class=" w-100" id="cardDelivery">
                      <c-card-header id="tituloProd" >
                        <div class="progress-group-prepend m-0 p-0 d-flex justify-content-start ps-3" >
                          <span class="text-body-secondary small d-flex"  >
                            <!-- <i class="fa-solid fa-circle " style="color: green;"></i> -->
                            <div class="d-block" >
                              <p class="text-nowrap " style="font-size: 20px; text-align: center;text-transform: uppercase;"><strong>{{produtos.produto}}</strong></p><br/>
                              <p class="text-nowrap " style="margin-top:-35px ;margin-bottom:-5px ">Id: {{produtos.id}}</p>
                            </div>
                          </span>
                        </div>
                      </c-card-header>
                      <c-card-body>
                        <div class="progress-group-bars d-flex ps-3">
                          <span class="text-body-secondary small w-50 pe-1 ps-1">
                            <p style="font-size: 10px; margin-bottom: 0px;">Custo</p>
                            <p class="mb-0"><strong>R${{produtos.custo}}</strong></p>
                            <c-progress thin color="danger" value="{{produtos.custo == 0  ? 0 : 100 - (produtos.custo/(produtos.custo+produtos.venda))*100 }}" aria-label="Custo" />
                          </span>
                          <span class="text-body-secondary small w-50 pe-1 ps-1" >
                            <p style="font-size: 10px;margin-bottom: 0px;">Venda</p>
                            <p  class="mb-0"><strong>R${{produtos.venda}}</strong></p>
                            <c-progress thin color="info" value="{{produtos.custo == 0 ? 100: 100 - (produtos.venda/(produtos.custo+produtos.venda))*100}}" aria-label="Venda" />

                          </span>
                        </div>
                      </c-card-body>
                    </c-card>  
                  </div>
                </c-tab-panel>
                <c-tab-panel class="p-3" [itemKey]="1">
                  <div *ngFor="let produtos of jsonServer.listaDeProdutos1" 
                  class="progress-group p-0"  
                  (click)="produtoGraficoGrupo(produtos.produto)"
                  id="divProdutos">
                    <c-card class=" w-100" id="cardDelivery">
                      <c-card-header id="tituloProd" >
                        <div class="progress-group-prepend m-0 p-0 d-flex justify-content-start ps-3" >
                          <span class="text-body-secondary small d-flex"  >
                            <!-- <i class="fa-solid fa-circle " style="color: green;"></i> -->
                            <div class="d-block" >
                              <p class="text-nowrap " style="font-size: 20px; text-align: center;text-transform: uppercase;"><strong>{{produtos.produto}}</strong></p><br/>
                              <p class="text-nowrap " style="margin-top:-35px ;margin-bottom:-5px ">Id: {{produtos.id}}</p>
                            </div>
                          </span>
                        </div>
                      </c-card-header>
                      <c-card-body>
                        <div class="progress-group-bars d-flex ps-3">
                          <span class="text-body-secondary small w-50 pe-1 ps-1">
                            <p style="font-size: 10px; margin-bottom: 0px;">Custo</p>
                            <p class="mb-0"><strong>R${{produtos.custo}}</strong></p>
                            <c-progress thin color="danger" value="{{produtos.custo == 0  ? 0 : 100 - (produtos.custo/(produtos.custo+produtos.venda))*100 }}" aria-label="Custo" />
                          </span>
                          <span class="text-body-secondary small w-50 pe-1 ps-1" >
                            <p style="font-size: 10px;margin-bottom: 0px;">Venda</p>
                            <p  class="mb-0"><strong>R${{produtos.venda}}</strong></p>
                            <c-progress thin color="info" value="{{produtos.custo == 0 ? 100: 100 - (produtos.venda/(produtos.custo+produtos.venda))*100}}" aria-label="Venda" />

                          </span>
                        </div>
                      </c-card-body>
                    </c-card>  
                  </div>
                </c-tab-panel>
              </c-tabs-content>
            </c-tabs>
            <div class="legend text-center d-none d-md-block" ngPreserveWhitespaces>
              <small>
                <sup>
                  <span class="badge badge-pill badge-sm bg-info">&nbsp;</span>
                </sup>
                <span>Venda</span>
                &nbsp;&nbsp;
                <sup>
                  <span class="badge badge-pill badge-sm bg-danger">&nbsp;</span>
                </sup>
                <span>Custo</span>
              </small>
            </div>
          </c-col>
          <c-col md="6" xl="8" xs="12">
            <c-row id="graficoGrupoScroll" class="mt-1">
              <canvas id="vendasPorProdutoChart" [height]="500" #vendasPorProdutoChartRef></canvas>
            </c-row>
            <c-row class="mt-3 pt-5">
              <canvas id="estoqueProdutoChart" [height]="500" #estoqueProdutoChartRef></canvas>
            </c-row>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<c-row class="px-4">
  <c-col xs>
    <c-card>
      <c-card-header>Entregas</c-card-header>
      <c-card-body>
        <c-row>
          <c-col  md="6" xl="6" xs="12">
            <canvas id="chartMotoboyDelivery" #chartMotoboyRef [height]="450" ></canvas>
          </c-col>
          <c-col  md="6" xl="6" xs="12">
            <canvas id="chartBairrosDelivery" #chartBairrosDeliveryRef [height]="450" ></canvas>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>
